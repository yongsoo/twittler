<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Twittler</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/twittler.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <h1>Twittler</h1>
    <ul id="tweetstream"></ul>

    <script>
      $(document).ready(function(){

        var fetchTweets = function() {
          var $tweetstream = $('#tweetstream');
          $tweetstream.html('<li></li>');

          var index = streams.home.length - 1;
          var indexDiff = index - 10;
          while(index >= indexDiff){
            var tweet = streams.home[index];
            var $tweet = $('<li class="tweet"></li>');
            $tweet.text("(" + tweet.created_at.toLocaleTimeString() + ") " + '@' + tweet["user"] + ': ' + tweet["message"]);
            $tweetstream.append($tweet);
            index -= 1;
          }
        };

        var refresh = function() {
          fetchTweets();
          setTimeout(refresh, 500);
        };

        refresh();

      });
    </script>
  </body>
</html>
